(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["comic"],{"52e8":function(t,e,i){"use strict";var n=i("dc2b"),s=i.n(n);s.a},"9ead":function(t,e,i){!function(e,i){t.exports=i()}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=1)}([function(t,e,i){var n=i(3);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals),(0,i(6).default)("da410cd4",n,!1,{})},function(t,e,i){t.exports=i(5)},function(t,e,i){"use strict";var n=i(0);i.n(n).a},function(t,e,i){(t.exports=i(4)(!1)).push([t.i,"\n.vue-affix {\n  position: relative;\n}\n.affix {\n  position: fixed;\n}\n.affix-bottom {\n  position: relative;\n}\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var s=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),o=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(o).concat([s]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},s=0;s<this.length;s++){var o=this[s][0];"number"==typeof o&&(n[o]=!0)}for(s=0;s<t.length;s++){var r=t[s];"number"==typeof r[0]&&n[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),e.push(r))}},e}},function(t,e,i){"use strict";i.r(e);var n=function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)};function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n._withStripped=!0;var o={props:{relativeElementSelector:{type:String,required:!0},offset:{type:Object,default:function(){return{top:40,bottom:40}},validator:function(t){if("object"!==s(t))return!1;var e=Object.keys(t);return e.includes("top")&&e.includes("bottom")}},enabled:{type:Boolean,default:!0},scrollAffix:{type:Boolean,default:!1},scrollContainerSelector:{type:String,default:null}},computed:{relativeElement:function(){return document.querySelector(this.relativeElementSelector)},scrollContainer:function(){return this.scrollContainerSelector?document.querySelector(this.scrollContainerSelector):window},affixTopPos:function(){return this.affixRect.top+this.topOfScreen-this.offset.top-this.topPadding},affixBottomPos:function(){return this.affixRect.bottom+this.topOfScreen+this.offset.bottom},bottomOfScreen:function(){return this.topOfScreen+this.scrollContainer.innerHeight},relativeElmTopPos:function(){return this.topOfScreen+this.relativeElement.getBoundingClientRect().top},relativeElmBottomPos:function(){return this.topOfScreen+this.relativeElement.getBoundingClientRect().bottom},screenIsPastAffix:function(){return this.bottomOfScreen>=this.affixBottomPos},screenIsBeforeAffix:function(){return this.topOfScreen<=this.affixTopPos},screenIsBeforeRelativeElm:function(){return this.topOfScreen<=this.relativeElmTopPos-this.offset.top},screenIsPastRelativeElm:function(){return this.bottomOfScreen>=this.relativeElmBottomPos+this.offset.bottom},screenIsInsideRelativeElm:function(){return!this.screenIsBeforeRelativeElm&&!this.screenIsPastRelativeElm}},data:function(){return{frameId:null,affixHeight:null,affixRect:null,affixInitialTop:null,relativeElmOffsetTop:null,topPadding:null,lastState:null,currentState:null,currentScrollAffix:null,topOfScreen:null,lastDistanceFromTop:null,scrollingUp:null,scrollingDown:null}},watch:{offset:function(t,e){t.top===e.top&&t.bottom===e.bottom||this.onScroll()}},methods:{updateData:function(){this.topOfScreen=this.scrollContainer.scrollTop||window.pageYOffset,this.affixRect=this.$el.getBoundingClientRect(),this.affixHeight=this.$el.offsetHeight,this.relativeElmOffsetTop=this.getOffsetTop(this.relativeElement),this.affixInitialTop=this.getOffsetTop(this.$el)},handleScroll:function(){var t=this;this.frameId||(this.frameId=window.requestAnimationFrame(function(){t.onScroll(),t.frameId=null}))},onScroll:function(){if(this.enabled)if(this.updateData(),this.affixHeight+this.offset.top>=this.relativeElement.offsetHeight)this.scrollAffix&&"scrollaffix-top"!==this.currentScrollAffix?this.setScrollAffixTop():"affix-top"!==this.currentState&&this.setAffixTop();else{var t=this.affixHeight+this.offset.bottom+this.offset.top;this.scrollAffix&&t>this.scrollContainer.innerHeight?this.handleScrollAffix():this.handleAffix()}else this.removeClasses()},handleAffix:function(){this.topOfScreen<this.relativeElmOffsetTop-this.offset.top&&this.setAffixTop(),this.topOfScreen>=this.relativeElmOffsetTop-this.offset.top&&this.relativeElmBottomPos-this.offset.bottom>=this.topOfScreen+this.topPadding+this.affixHeight+this.offset.top&&this.setAffix(),this.relativeElmBottomPos-this.offset.bottom<this.topOfScreen+this.topPadding+this.affixHeight+this.offset.top&&this.setAffixBottom(),this.lastState=this.currentState},handleScrollAffix:function(){if(this.setScrollingDirection(),this.screenIsBeforeRelativeElm)this.setScrollAffixTop();else if(this.screenIsPastRelativeElm)this.setScrollAffixBottom();else if(this.screenIsInsideRelativeElm){var t="scrollaffix-top"===this.currentScrollAffix||"scrollaffix-bottom"===this.currentScrollAffix||"scrollaffix-up"===this.currentScrollAffix&&this.scrollingDown||"scrollaffix-down"===this.currentScrollAffix&&this.scrollingUp;this.screenIsBeforeAffix&&this.scrollingUp?this.setScrollAffixUp():this.screenIsPastAffix&&this.scrollingDown?this.setScrollAffixDown():t&&this.setScrollAffixScrolling()}this.lastScrollAffixState=this.currentScrollAffix,this.lastDistanceFromTop=this.topOfScreen},initScrollAffix:function(){this.bottomOfScreen<this.affixBottomPos?this.setScrollAffixTop():this.screenIsInsideRelativeElm?this.setScrollAffixDown():this.screenIsPastRelativeElm?this.setScrollAffixBottom():this.setScrollAffixScrolling()},setScrollAffixScrolling:function(){this.currentScrollAffix="scrollaffix-scrolling",this.$el.style.top="".concat(Math.floor(this.affixRect.top)+this.topOfScreen-this.affixInitialTop,"px"),this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent()},setScrollAffixUp:function(){this.currentScrollAffix="scrollaffix-up",this.currentScrollAffix!==this.lastScrollAffixState&&(this.$el.style.top="".concat(this.topPadding+this.offset.top,"px"),this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent(),this.$el.classList.add("affix"))},setScrollAffixDown:function(){this.currentScrollAffix="scrollaffix-down",this.currentScrollAffix!==this.lastScrollAffixState&&(this.$el.style.bottom="".concat(this.offset.bottom,"px"),this.$el.style.top="auto",this.removeClasses(),this.emitEvent(),this.$el.classList.add("affix"))},setScrollAffixTop:function(){this.currentScrollAffix="scrollaffix-top",this.$el.style.top=0,this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent()},setScrollAffixBottom:function(){this.currentScrollAffix="scrollaffix-bottom",this.$el.style.top="".concat(this.relativeElmBottomPos-this.affixInitialTop-this.affixHeight,"px"),this.$el.style.bottom="auto",this.removeClasses(),this.emitEvent()},setScrollingDirection:function(){this.topOfScreen>this.lastDistanceFromTop?(this.scrollingDown=!0,this.scrollingUp=!1):(this.scrollingUp=!0,this.scrollingDown=!1)},setAffixTop:function(){this.currentState="affix-top",this.currentState!==this.lastState&&(this.emitEvent(),this.removeClasses(),this.$el.classList.remove("affix"),this.$el.classList.add("affix-top"),this.$el.style.top=null)},setAffix:function(){this.currentState="affix",this.$el.style.top="".concat(this.topPadding+this.offset.top,"px"),this.currentState!==this.lastState&&(this.emitEvent(),this.removeClasses(),this.$el.classList.add("affix"))},setAffixBottom:function(){this.currentState="affix-bottom",this.$el.style.top="".concat(this.relativeElement.offsetHeight-this.affixHeight-this.offset.bottom-this.topPadding,"px"),this.currentState!==this.lastState&&(this.emitEvent(),this.removeClasses(),this.$el.classList.add("affix-bottom"))},removeClasses:function(){this.$el.classList.remove("affix-top"),this.$el.classList.remove("affix"),this.$el.classList.remove("affix-bottom")},emitEvent:function(){this.scrollAffix&&this.lastScrollAffixState&&this.currentScrollAffix!==this.lastScrollAffixState&&this.$emit(this.currentScrollAffix.replace("-","")),this.lastState&&this.$emit(this.currentState.replace("-",""))},getOffsetTop:function(t){for(var e=0,i=t;i;)e+=i.offsetTop,i=i.offsetParent;return e}},mounted:function(){this.$el.classList.add("vue-affix"),this.affixInitialTop=this.getOffsetTop(this.$el),this.topPadding=this.affixInitialTop-this.getOffsetTop(this.relativeElement),this.updateData(),this.scrollAffix&&this.initScrollAffix(),this.onScroll(),this.scrollContainer.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){this.scrollContainer.removeEventListener("scroll",this.handleScroll)}};i(2);var r=function(t,e,i,n,s,o,r,c){var l,f="function"==typeof t?t.options:t;if(e&&(f.render=e,f.staticRenderFns=i,f._compiled=!0),n&&(f.functional=!0),o&&(f._scopeId="data-v-"+o),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},f._ssrRegister=l):s&&(l=c?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(f.functional){f._injectStyles=l;var a=f.render;f.render=function(t,e){return l.call(e),a(t,e)}}else{var h=f.beforeCreate;f.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:f}}(o,n,[],!1,null,null,null);r.options.__file="src/affix.vue";var c=r.exports;i.d(e,"Affix",function(){return c});var l={install:function(t){l.install.installed||t.component("affix",c)}};"undefined"!=typeof window&&window.Vue&&l.install(window.Vue),e.default=l},function(t,e,i){"use strict";function n(t,e){for(var i=[],n={},s=0;s<e.length;s++){var o=e[s],r=o[0],c={id:t+":"+s,css:o[1],media:o[2],sourceMap:o[3]};n[r]?n[r].parts.push(c):i.push(n[r]={id:r,parts:[c]})}return i}i.r(e),i.d(e,"default",function(){return p});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},r=s&&(document.head||document.getElementsByTagName("head")[0]),c=null,l=0,f=!1,a=function(){},h=null,u="data-vue-ssr-id",d="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(t,e,i,s){f=i,h=s||{};var r=n(t,e);return m(r),function(e){for(var i=[],s=0;s<r.length;s++){var c=r[s];(l=o[c.id]).refs--,i.push(l)}for(e?m(r=n(t,e)):r=[],s=0;s<i.length;s++){var l;if(0===(l=i[s]).refs){for(var f=0;f<l.parts.length;f++)l.parts[f]();delete o[l.id]}}}}function m(t){for(var e=0;e<t.length;e++){var i=t[e],n=o[i.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](i.parts[s]);for(;s<i.parts.length;s++)n.parts.push(v(i.parts[s]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var r=[];for(s=0;s<i.parts.length;s++)r.push(v(i.parts[s]));o[i.id]={id:i.id,refs:1,parts:r}}}}function x(){var t=document.createElement("style");return t.type="text/css",r.appendChild(t),t}function v(t){var e,i,n=document.querySelector("style["+u+'~="'+t.id+'"]');if(n){if(f)return a;n.parentNode.removeChild(n)}if(d){var s=l++;n=c||(c=x()),e=b.bind(null,n,s,!1),i=b.bind(null,n,s,!0)}else n=x(),e=function(t,e){var i=e.css,n=e.media,s=e.sourceMap;if(n&&t.setAttribute("media",n),h.ssrId&&t.setAttribute(u,e.id),s&&(i+="\n/*# sourceURL="+s.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}var g=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}();function b(t,e,i,n){var s=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=g(e,s);else{var o=document.createTextNode(s),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}}])})},d73b:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:{"min-height":t.$root.$data.height+"px"},attrs:{id:"content"}},[i("div",{staticClass:"container",attrs:{id:"article"}},[0!==Object.keys(t.comic).length?i("div",{staticClass:"row"},[i("aside",{staticClass:"col-2 col-md-1"},[i("affix",{staticClass:"sidebar-menu",attrs:{"relative-element-selector":"#comic",align:"left"}},[i("button",{staticClass:"sticky-bar-el btn btn-circle btn-sm",class:{"btn-primary":t.lightOn,"btn-secondary":!t.lightOn},on:{click:function(e){return t.$router.go(-1)}}},[i("font-awesome-icon",{attrs:{icon:"home"}})],1),i("br"),i("router-link",{staticClass:"sticky-bar-el btn btn-circle btn-sm",class:{"btn-primary":t.lightOn,"btn-secondary":!t.lightOn},attrs:{to:{path:"/info/comic/"+t.comicID},tag:"button"}},[i("font-awesome-icon",{attrs:{icon:"info"}})],1),i("br"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.currentIndex,expression:"currentIndex"}],staticClass:"sticky-bar-el chapter-text form-control form-control-sm",class:{"bg-white":t.lightOn,"text-dark":t.lightOn,"bg-dark":!t.lightOn,"text-white":!t.lightOn},attrs:{maxlength:"5"},domProps:{value:t.currentIndex},on:{input:function(e){e.target.composing||(t.currentIndex=e.target.value)}}}),i("button",{staticClass:"sticky-bar-el btn btn-circle btn-sm",class:{"btn-primary":t.lightOn,"btn-secondary":!t.lightOn},attrs:{disabled:0===t.comic.chapters.length},on:{click:t.get}},[i("font-awesome-icon",{attrs:{icon:"arrow-right"}})],1),i("br")],1)],1),i("div",{staticClass:"col-10 col-md-10"},[i("div",{attrs:{id:"comic"}},t._l(t.sections,function(e){return i("div",{key:e.index},[t._l(e.content,function(t){return i("img",{key:t,attrs:{src:t}})}),i("hr",{directives:[{name:"observe-visibility",rawName:"v-observe-visibility",value:{callback:function(i,n){return t.observe(i,n,e)}},expression:"{callback: (isVisible, entry) => observe(isVisible, entry, each)}"}]})],2)}),0),i("div",[i("br"),i("br"),i("center",[i("loading",{attrs:{size:150}})],1)],1)])]):t._e()])])},s=[],o=(i("96cf"),i("3b8d")),r=i("9ead"),c={name:"comic",components:{Affix:r["Affix"]},data:function(){return{comicID:"",lightOn:!1,loading:!1,sections:[],fetchIndex:0,currentIndex:1,transitIndex:0}},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e,i,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$vuex.getters.getSession(),this.comicID=this.$route.params.comicID,this.$vuex.getters.isComicIDExists(this.comicID)){t.next=9;break}return t.next=5,this.$api.fetchComicByID(e,this.comicID);case 5:i=t.sent,this.$vuex.commit("insertComic",{comicID:this.comicID,comic:i}),t.next=16;break;case 9:if(n=this.$vuex.getters.getComicByID(this.comicID),void 0!==n.cahpers&&!this.$vuex.getters.isComicNeedUpdate(this.comicID)){t.next=15;break}return t.next=13,this.$api.fetchComicByID(e,this.comicID);case 13:s=t.sent,this.$vuex.commit("updateComic",{comicID:this.comicID,comic:s});case 15:this.currentIndex=this.bookmark["lastReadIndex"]||this.currentIndex;case 16:this.get();case 17:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),computed:{bookmark:function(){return this.$vuex.getters.getComicBookmarkByID(this.comicID)||{}},comic:function(){return this.$vuex.getters.getComicByID(this.comicID)||{}}},methods:{get:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.sections=[],this.fetchIndex=this.currentIndex-1,this.transitIndex=this.currentIndex-1,t.next=5,this.fetchComicChapter(this.fetchIndex++).then(function(t){return e.sections.push(t)});case 5:return t.next=7,this.fetchComicChapter(this.fetchIndex++).then(function(t){return e.sections.push(t)});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),fetchComicChapter:function(t){return this.$api.fetchComicChapter(this.$vuex.getters.getSession(),this.comicID,t).then(function(e){return{index:t,content:e}})},observe:function(t,e,i){var n=this;t&&this.transitIndex<i.index&&(this.currentIndex=i.index+1,this.transitIndex=i.index,this.bookmark["lastReadIndex"]=this.currentIndex,this.$vuex.commit("insertComicBookmark",{comicID:this.comic.comicID,bookmark:this.bookmark}),!this.loading&&this.fetchIndex-this.currentIndex<1&&(this.loading=!0,this.fetchComicChapter(this.fetchIndex++).then(function(t){return n.sections.push(t)}),setTimeout(function(){n.loading=!1},1e3)))}}},l=c,f=(i("52e8"),i("2877")),a=Object(f["a"])(l,n,s,!1,null,"e68bf79a",null);e["default"]=a.exports},dc2b:function(t,e,i){}}]);
//# sourceMappingURL=comic.14711e3b.js.map